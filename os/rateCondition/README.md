# raceCondition

## 경쟁상태(race condition)
둘 이상의 입력이나 조작 때문에 두개의 프로세스가 하나의 자원을 가지고 경쟁하는 상태

두개의 프로세스가 동시에 하나의 자원에 접근하기 때문에 의도치 않은 결과를 얻을수 있다.

## 라이브락(Livelock)
하나의 프로세스가 하나의 자원을 점유하고 있을때 다른 프로세스가 해당 자원을 사용하기 위해 무한정으로 대기상태에 빠지는것

## 교착상태(DeadLock)
두개 이상의 프로세스가 서로 상대방의 자원을 요청해 서로 대기상태에 빠져 아무 작업도 하지 못하는 상태

### DeadLock의 4가지 조건
 * 자원점유와 대기
    * 자원을 가지고 있는 상태에서 다른 프로세스가 할당받은 자원의 반납을 대기하는것.
    
 * 비선점
    * 다른 프로세스가 할당받고 있는 자원은 사용이 끝날때까지 강제로 빼앗지 못한다.
 
 * 순환대기
    * 각 프로세스가 순환적으로 다음 프로세스가 요구하는 자원을 가지고있는것
 
 * 상호 배제
    * 하나의 자원은 하나의 프로세스만 사용 가능하다.
    
# DeadLock 해결방법

## 데드락 예방방법
데드락은 4가지 조건을 만족해야 발생한다.

그렇기 때문에 시스템 차원에서 4가지 조건이 발생하지 않게 예방하는 방법

교착상태의 4가지 조건 중 하나를 삭제해 데드락을 예방한다.

자원의 낭비가 심하다.

## 데드락 회피
데드락을 발생하는 조건을 회피하는 알고리즘 적용방법 

은행원 알고리즘이 유명하다.

프로세스가 자원을 요구하는 시점에 자원을 할당해도 안전한지에 대한 여부를 확인

자원을 할당해도 안전하다면 자원을 할당, 안전하지 않다면 다른 프로세스들이 자원을 해제할때까지 대기하는 기법

## 데드락의 탐지
자원 할당 그래프를 이용해 자원을 요청할떄 마다 탐지 알고리즘을 실행한다.

오버헤드가 크다.

## 데드락의 회복
데드락을 예방하거나 회피하지 않고 데드락이 발생하면 그때 회복하는 기법

교착 상태를 일으킨 프로세스를 종료하거나, 할당된 자원을 해제함으로써 데드락으로 부터 회복하는 기법

* 프로세스 종료기법
    * 교착상태의 프로세스를 모두 종료
    * 교착상태가 제거될때까지 하나의 프로세스씩 중지

* 자원 선점
    * 교착상태의 프로세스가 점유하고 있는 자원을 선점하여 다른 프로세스에게 할당하며, 해당 프로세스를 일시정지 시키는 기법
    * 우선순위가 낮거나, 수행되는 횟수가 적은 프로세스 등을 위주로 프로세스의 자원을 선점해버린다.
    
## 데드락 무시
무시해도 좋을 정도의 확률도 데드락이 일어난다면 그냥 무시한다.

데드락을 해결하려면 성능상 손해를 보기 때문이다.